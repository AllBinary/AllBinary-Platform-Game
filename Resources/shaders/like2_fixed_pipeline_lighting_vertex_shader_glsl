__VERSION__
//#version 330 core
in vec3 position;
in vec3 normal;
in vec2 texcoord;

out vec3 Normal;
out vec3 FragPos;
out vec2 TexCoord;
out vec3 LightColor; // For Gouraud shading

//niform mat4 model;
//niform mat4 view;
//niform mat4 projection;
uniform vec3 lightPos;
uniform vec3 lightColor;

void main()
{
    //FragPos = vec3(model * vec4(position, 1.0));
    vec4 eye_space_pos = gl_ModelViewMatrix * gl_Vertex;
    FragPos = eye_space_pos.xyz;

    //Normal = mat3(transpose(inverse(model))) * normal;
    Normal = gl_NormalMatrix * gl_Normal;

    TexCoord = texcoord;

    //gl_Position = projection * view * model * vec4(position, 1.0);
    gl_Position = gl_ModelViewProjectionMatrix * vec4(position, 1.0);

    //optional
    vec3 norm = normalize(Normal);
    vec3 lightDir = normalize(lightPos - FragPos);
    float diff = max(dot(norm, lightDir), 0.0);
    LightColor = diff * lightColor; 
}